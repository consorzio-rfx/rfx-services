version: "3"
services:
  publications:
    hostname: localhost
    image: consorziorfx/php-ldap:5.6
    ports:
      - 80
#      - 443
#      - 22
    labels:
       - "reroute.ip=${REROUTE_IP}"
       - "reroute.ports=${REROUTE_PORTS}"
    volumes:
      - "${HTML_DIR}:/var/www/html"
      - "${abs_srcdir}/hostname:/etc/hostname"
      - "${abs_srcdir}/ssmtp.conf:/etc/ssmtp/ssmtp.conf"
      - "${abs_srcdir}/php.ini:/usr/local/etc/php/php.ini"
#      - "${SSLCERT_FILE_CRT}:/etc/gitlab/ssl/ca.crt"
#      - "${SSLCERT_FILE_KEY}:/etc/gitlab/ssl/ca.key"
#      - "${STORE_DIR}/logs:/var/log/gitlab"
#      - "${STORE_DIR}/data:/var/opt/gitlab"
    deploy:
      replicas: 1
      placement:
        constraints:
         - node.role == manager
         - node.hostname == ${HOSTNAME}
